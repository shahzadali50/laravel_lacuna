import{d as Y,p as P,C as w,r as m,a as d,o as r,s as c,e as s,w as l,u as o,m as $,b as n,f as j,t as p,P as C,g as u,F as _,v as O,l as R,M as z}from"./app-CveD8GQJ.js";import{A as q}from"./AdminLayout-Bv0R89G9.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-DbCxXuqh.js";const K={key:0,class:"loading-overlay"},G={class:"bg-white rounded-lg p-4 shadow-md responsive-table"},H={class:"mb-4 flex items-center justify-between"},J={class:"text-lg font-semibold"},Q={class:"mb-4"},W={key:0,class:"text-red-500"},X={class:"mb-4"},Z={key:0,class:"text-red-500"},ee={class:"mb-4"},te={key:0,class:"text-red-500"},ae={class:"mb-4"},se={key:0,class:"text-red-500"},oe={class:"text-right"},ie=Y({__name:"RelatedProductList",props:{product:Object,purchaseProducts:Object},setup(b){const y=P(!1),I=i=>i?R(i).format("DD-MM-YYYY hh:mm A"):"N/A",g=[{title:"ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Purchase Price",dataIndex:"purchase_price",key:"purchase_price"},{title:"Sale Price",dataIndex:"sale_Price",key:"sale_Price"},{title:"Stock",dataIndex:"stock",key:"stock"},{title:"Created At",dataIndex:"created_at",key:"created_at"},{title:"Action",dataIndex:"action",key:"action"}],D=w({}),A=i=>{z.confirm({title:"Are you sure you want to delete this purchase?",content:"This action cannot be undone.",okText:"Yes, Delete",okType:"danger",cancelText:"Cancel",onOk(){y.value=!0,D.delete(route("admin.purchase.product.delete",i),{onSuccess:()=>{},onFinish:()=>{y.value=!1}})}})},k=P(!1),t=w({id:null,purchase_price:"",sale_price:"",stock:"",description:""}),S=i=>{t.id=i.id,t.purchase_price=i.purchase_price,t.sale_price=i.sale_price,t.description=i.description,t.stock=i.stock,k.value=!0},M=()=>{y.value=!0,t.put(route("admin.purchase.product.update",t.id),{onSuccess:()=>{k.value=!1},onFinish:()=>{y.value=!1}})};return(i,e)=>{const E=m("a-spin"),v=m("a-button"),h=m("a-tooltip"),L=m("a-table"),N=m("a-col"),U=m("a-row"),x=m("a-input"),B=m("a-textarea"),F=m("a-modal");return r(),d(_,null,[y.value?(r(),d("div",K,[s(E,{size:"large"})])):c("",!0),s(q,null,{default:l(()=>[s(o($),{title:"Purchase Product List"}),s(U,null,{default:l(()=>[s(N,{span:24},{default:l(()=>[n("div",G,[n("div",H,[n("h2",J,"Purchase Product List - ( "+p(b.product.name)+")",1),n("div",null,[s(o(C),{href:i.route("admin.products")},{default:l(()=>[s(v,{class:"mx-2",type:"default"},{default:l(()=>e[8]||(e[8]=[u("Back")])),_:1})]),_:1},8,["href"]),s(o(C),{href:i.route("admin.products")},{default:l(()=>[s(v,{class:"mx-2",type:"default"},{default:l(()=>e[9]||(e[9]=[u("All purchase products List")])),_:1})]),_:1},8,["href"])])]),b.purchaseProducts?(r(),j(L,{key:0,columns:g,"data-source":b.purchaseProducts.data,rowKey:"id",bordered:""},{bodyCell:l(({column:a,record:f,index:T})=>[a.dataIndex==="id"?(r(),d(_,{key:0},[u(p(T+1),1)],64)):c("",!0),a.dataIndex==="name"?(r(),d(_,{key:1},[u(p(f.product.name),1)],64)):c("",!0),a.dataIndex==="purchase_price"?(r(),d(_,{key:2},[u(p(f.purchase_price),1)],64)):c("",!0),a.dataIndex==="sale_Price"?(r(),d(_,{key:3},[u(p(f.sale_price),1)],64)):c("",!0),a.dataIndex==="stock"?(r(),d(_,{key:4},[u(p(f.remaining_stock),1)],64)):a.dataIndex==="created_at"?(r(),d(_,{key:5},[u(p(I(f.created_at)),1)],64)):a.dataIndex==="action"?(r(),d(_,{key:6},[s(h,{placement:"top"},{title:l(()=>e[10]||(e[10]=[u("Delete")])),default:l(()=>[s(v,{type:"link",onClick:V=>A(f.id)},{default:l(()=>e[11]||(e[11]=[n("i",{class:"fa fa-trash text-red-500","aria-hidden":"true"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024),s(h,{placement:"top"},{title:l(()=>e[12]||(e[12]=[u("Edit")])),default:l(()=>[s(v,{type:"link",onClick:V=>S(f)},{default:l(()=>e[13]||(e[13]=[n("i",{class:"fa fa-pencil-square-o text-s text-green-500","aria-hidden":"true"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024)],64)):c("",!0)]),_:1},8,["data-source"])):c("",!0)])]),_:1})]),_:1}),s(F,{open:k.value,"onUpdate:open":e[6]||(e[6]=a=>k.value=a),title:"Edit Purchase Details",onCancel:e[7]||(e[7]=a=>k.value=!1),footer:null},{default:l(()=>[n("form",{onSubmit:e[5]||(e[5]=O(a=>M(),["prevent"]))},[n("div",Q,[e[14]||(e[14]=n("label",{class:"block"},"Purchase price",-1)),s(x,{type:"number",value:o(t).purchase_price,"onUpdate:value":e[0]||(e[0]=a=>o(t).purchase_price=a),class:"mt-2 w-full"},null,8,["value"]),o(t).errors.purchase_price?(r(),d("div",W,p(o(t).errors.purchase_price),1)):c("",!0)]),n("div",X,[e[15]||(e[15]=n("label",{class:"block"},"Sale price",-1)),s(x,{type:"number",value:o(t).sale_price,"onUpdate:value":e[1]||(e[1]=a=>o(t).sale_price=a),class:"mt-2 w-full"},null,8,["value"]),o(t).errors.sale_price?(r(),d("div",Z,p(o(t).errors.sale_price),1)):c("",!0)]),n("div",ee,[e[16]||(e[16]=n("label",{class:"block"},"Sale price",-1)),s(x,{type:"number",value:o(t).stock,"onUpdate:value":e[2]||(e[2]=a=>o(t).stock=a),class:"mt-2 w-full"},null,8,["value"]),o(t).errors.stock?(r(),d("div",te,p(o(t).errors.stock),1)):c("",!0)]),n("div",ae,[e[17]||(e[17]=n("label",{class:"block"},"Description",-1)),s(B,{value:o(t).description,"onUpdate:value":e[3]||(e[3]=a=>o(t).description=a),class:"mt-2 w-full",placeholder:"Description","auto-size":{minRows:2,maxRows:5}},null,8,["value"]),o(t).errors.description?(r(),d("div",se,p(o(t).errors.description),1)):c("",!0)]),n("div",oe,[s(v,{type:"default",onClick:e[4]||(e[4]=a=>k.value=!1)},{default:l(()=>e[18]||(e[18]=[u("Cancel")])),_:1}),s(v,{type:"primary","html-type":"submit",class:"ml-2"},{default:l(()=>e[19]||(e[19]=[u("Update")])),_:1})])],32)]),_:1},8,["open"])]),_:1})],64)}}});export{ie as default};
