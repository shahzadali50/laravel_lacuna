import{d as H,p as C,c as J,C as g,r as v,a as u,o as n,s as p,e as l,w as i,u as t,m as Q,b as a,f as W,g as c,P as S,F as k,t as m,v as U,l as X,M as Z}from"./app-CveD8GQJ.js";import{A as ee}from"./AdminLayout-Bv0R89G9.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-DbCxXuqh.js";const te={key:0,class:"loading-overlay"},se={class:"bg-white rounded-lg p-4 shadow-md responsive-table"},le={class:"mb-4 flex items-center justify-between"},ae={class:"mb-4"},oe={key:0,class:"text-red-500"},re={class:"mb-4"},ie={key:0,class:"text-red-500"},ne={class:"mb-4"},de={key:0,class:"text-red-500"},ue={class:"mb-4"},pe={key:0,class:"text-red-500"},ce={class:"mb-4"},me={key:0,class:"text-red-500"},ve={class:"text-right"},fe={class:"mb-4"},ke={key:0,class:"text-red-500"},_e={class:"mb-4"},ye={key:0,class:"text-red-500"},be={class:"mb-4"},xe={key:0,class:"text-red-500"},Pe={class:"mb-4"},we={key:0,class:"text-red-500"},Ce={class:"text-right"},Ie=H({__name:"PurchaseProductList",props:{purchaseProducts:Object,products:Array},setup(w){const _=C(!1),A=d=>d?X(d).format("DD-MM-YYYY hh:mm A"):"N/A",M=[{title:"ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Purchase Price",dataIndex:"purchase_price",key:"purchase_price"},{title:"Sale Price",dataIndex:"sale_Price",key:"sale_Price"},{title:"Stock",dataIndex:"stock",key:"stock"},{title:"Created At",dataIndex:"created_at",key:"created_at"},{title:"Action",dataIndex:"action",key:"action"}],$=w,F=J(()=>{var d;return((d=$.products)==null?void 0:d.map(e=>({value:e.id,label:e.name})))||[]}),L=(d,e)=>e.label.toLowerCase().includes(d.toLowerCase()),E=g({}),N=d=>{Z.confirm({title:"Are you sure you want to delete this purchase?",content:"This action cannot be undone.",okText:"Yes, Delete",okType:"danger",cancelText:"Cancel",onOk(){_.value=!0,E.delete(route("admin.purchase.product.delete",d),{onSuccess:()=>{},onFinish:()=>{_.value=!1}})}})},b=C(!1),x=C(!1),r=g({product_id:null,purchase_price:"",sale_price:"",stock:"",description:""}),o=g({id:null,purchase_price:"",sale_price:"",stock:"",description:""}),V=()=>{b.value=!0},B=()=>{_.value=!0,r.post(route("admin.purchase.product.detail.store"),{onSuccess:()=>{b.value=!1,r.reset()},onFinish:()=>{_.value=!1}})},T=d=>{o.id=d.id,o.purchase_price=d.purchase_price,o.sale_price=d.sale_price,o.description=d.description,o.stock=d.stock,x.value=!0},Y=()=>{_.value=!0,o.put(route("admin.purchase.product.update",o.id),{onSuccess:()=>{x.value=!1},onFinish:()=>{_.value=!1}})};return(d,e)=>{const O=v("a-spin"),f=v("a-button"),h=v("a-tooltip"),R=v("a-table"),j=v("a-col"),z=v("a-row"),q=v("a-select"),P=v("a-input"),D=v("a-textarea"),I=v("a-modal");return n(),u(k,null,[_.value?(n(),u("div",te,[l(O,{size:"large"})])):p("",!0),l(ee,null,{default:i(()=>[l(t(Q),{title:"Purchase Product List"}),l(z,null,{default:i(()=>[l(j,{span:24},{default:i(()=>[a("div",se,[a("div",le,[e[20]||(e[20]=a("h2",{class:"text-lg font-semibold"},"Purchase Product List",-1)),a("div",null,[l(f,{class:"mx-2",type:"default",onClick:e[0]||(e[0]=s=>V())},{default:i(()=>e[17]||(e[17]=[c("Add Purchase Detail")])),_:1}),l(t(S),{href:d.route("admin.products")},{default:i(()=>[l(f,{class:"mx-2",type:"default"},{default:i(()=>e[18]||(e[18]=[c("Back")])),_:1})]),_:1},8,["href"]),l(t(S),{href:d.route("admin.purchase.product.log")},{default:i(()=>[l(f,{class:"mx-2",type:"default"},{default:i(()=>e[19]||(e[19]=[c("purchase products logs")])),_:1})]),_:1},8,["href"])])]),w.purchaseProducts?(n(),W(R,{key:0,columns:M,"data-source":w.purchaseProducts.data,rowKey:"id",bordered:""},{bodyCell:i(({column:s,record:y,index:K})=>[s.dataIndex==="id"?(n(),u(k,{key:0},[c(m(K+1),1)],64)):p("",!0),s.dataIndex==="name"?(n(),u(k,{key:1},[c(m(y.product.name),1)],64)):p("",!0),s.dataIndex==="purchase_price"?(n(),u(k,{key:2},[c(m(y.purchase_price),1)],64)):p("",!0),s.dataIndex==="sale_Price"?(n(),u(k,{key:3},[c(m(y.sale_price),1)],64)):p("",!0),s.dataIndex==="stock"?(n(),u(k,{key:4},[c(m(y.remaining_stock),1)],64)):s.dataIndex==="created_at"?(n(),u(k,{key:5},[c(m(A(y.created_at)),1)],64)):s.dataIndex==="action"?(n(),u(k,{key:6},[l(h,{placement:"top"},{title:i(()=>e[21]||(e[21]=[c("Delete")])),default:i(()=>[l(f,{type:"link",onClick:G=>N(y.id)},{default:i(()=>e[22]||(e[22]=[a("i",{class:"fa fa-trash text-red-500","aria-hidden":"true"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024),l(h,{placement:"top"},{title:i(()=>e[23]||(e[23]=[c("Edit")])),default:i(()=>[l(f,{type:"link",onClick:G=>T(y)},{default:i(()=>e[24]||(e[24]=[a("i",{class:"fa fa-pencil-square-o text-s text-green-500","aria-hidden":"true"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024)],64)):p("",!0)]),_:1},8,["data-source"])):p("",!0)])]),_:1})]),_:1}),l(I,{open:b.value,"onUpdate:open":e[7]||(e[7]=s=>b.value=s),title:"Add Purchase Detail",onCancel:e[8]||(e[8]=s=>b.value=!1),footer:null},{default:i(()=>[a("form",{onSubmit:U(B,["prevent"])},[a("div",ae,[e[25]||(e[25]=a("label",{class:"block"},"Product",-1)),l(q,{value:t(r).product_id,"onUpdate:value":e[1]||(e[1]=s=>t(r).product_id=s),"show-search":"",placeholder:"Select a product",style:{width:"100%"},options:F.value,"filter-option":L},null,8,["value","options"]),t(r).errors.product_id?(n(),u("div",oe,m(t(r).errors.product_id),1)):p("",!0)]),a("div",re,[e[26]||(e[26]=a("label",{class:"block"},"Purchase Price",-1)),l(P,{type:"number",value:t(r).purchase_price,"onUpdate:value":e[2]||(e[2]=s=>t(r).purchase_price=s),class:"mt-2 w-full"},null,8,["value"]),t(r).errors.purchase_price?(n(),u("div",ie,m(t(r).errors.purchase_price),1)):p("",!0)]),a("div",ne,[e[27]||(e[27]=a("label",{class:"block"},"Sale Price",-1)),l(P,{type:"number",value:t(r).sale_price,"onUpdate:value":e[3]||(e[3]=s=>t(r).sale_price=s),class:"mt-2 w-full"},null,8,["value"]),t(r).errors.sale_price?(n(),u("div",de,m(t(r).errors.sale_price),1)):p("",!0)]),a("div",ue,[e[28]||(e[28]=a("label",{class:"block"},"Stock",-1)),l(P,{type:"number",value:t(r).stock,"onUpdate:value":e[4]||(e[4]=s=>t(r).stock=s),class:"mt-2 w-full"},null,8,["value"]),t(r).errors.stock?(n(),u("div",pe,m(t(r).errors.stock),1)):p("",!0)]),a("div",ce,[e[29]||(e[29]=a("label",{class:"block"},"Description",-1)),l(D,{value:t(r).description,"onUpdate:value":e[5]||(e[5]=s=>t(r).description=s),class:"mt-2 w-full",placeholder:"Description","auto-size":{minRows:2,maxRows:5}},null,8,["value"]),t(r).errors.description?(n(),u("div",me,m(t(r).errors.description),1)):p("",!0)]),a("div",ve,[l(f,{type:"default",onClick:e[6]||(e[6]=s=>b.value=!1)},{default:i(()=>e[30]||(e[30]=[c("Cancel")])),_:1}),l(f,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>e[31]||(e[31]=[c("Save")])),_:1})])],32)]),_:1},8,["open"]),l(I,{open:x.value,"onUpdate:open":e[15]||(e[15]=s=>x.value=s),title:"Edit Purchase Details",onCancel:e[16]||(e[16]=s=>x.value=!1),footer:null},{default:i(()=>[a("form",{onSubmit:e[14]||(e[14]=U(s=>Y(),["prevent"]))},[a("div",fe,[e[32]||(e[32]=a("label",{class:"block"},"Purchase price",-1)),l(P,{type:"number",value:t(o).purchase_price,"onUpdate:value":e[9]||(e[9]=s=>t(o).purchase_price=s),class:"mt-2 w-full"},null,8,["value"]),t(o).errors.purchase_price?(n(),u("div",ke,m(t(o).errors.purchase_price),1)):p("",!0)]),a("div",_e,[e[33]||(e[33]=a("label",{class:"block"},"Sale price",-1)),l(P,{type:"number",value:t(o).sale_price,"onUpdate:value":e[10]||(e[10]=s=>t(o).sale_price=s),class:"mt-2 w-full"},null,8,["value"]),t(o).errors.sale_price?(n(),u("div",ye,m(t(o).errors.sale_price),1)):p("",!0)]),a("div",be,[e[34]||(e[34]=a("label",{class:"block"},"Sale price",-1)),l(P,{type:"number",value:t(o).stock,"onUpdate:value":e[11]||(e[11]=s=>t(o).stock=s),class:"mt-2 w-full"},null,8,["value"]),t(o).errors.stock?(n(),u("div",xe,m(t(o).errors.stock),1)):p("",!0)]),a("div",Pe,[e[35]||(e[35]=a("label",{class:"block"},"Description",-1)),l(D,{value:t(o).description,"onUpdate:value":e[12]||(e[12]=s=>t(o).description=s),class:"mt-2 w-full",placeholder:"Description","auto-size":{minRows:2,maxRows:5}},null,8,["value"]),t(o).errors.description?(n(),u("div",we,m(t(o).errors.description),1)):p("",!0)]),a("div",Ce,[l(f,{type:"default",onClick:e[13]||(e[13]=s=>x.value=!1)},{default:i(()=>e[36]||(e[36]=[c("Cancel")])),_:1}),l(f,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>e[37]||(e[37]=[c("Update")])),_:1})])],32)]),_:1},8,["open"])]),_:1})],64)}}});export{Ie as default};
